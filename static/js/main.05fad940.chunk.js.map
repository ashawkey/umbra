{"version":3,"sources":["SearchBar.js","const.js","Flow.js","SearchResults.js","App.js","index.js"],"names":["SearchBar","history","useHistory","useState","pathname","xs","split","length","extract_keyword","location","keyword","setKeyword","autoComplete","onSubmit","event","preventDefault","startsWith","push","TextField","id","label","margin","value","onChange","target","fullWidth","variant","API_ROOT","FlowItem","props","className","href","Flow","meta","map","index","SearchResults","useParams","page","results","setResults","status","setStatus","handleLeftpage","ipage","parseInt","toString","handleRightpage","useEffect","fetch","substr","then","res","json","console","log","catch","Paper","render_current_page","x","style","color","onClick","App","path","showUnder","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.05fad940.chunk.js","sourcesContent":["import React, {useState} from 'react';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport './SearchBar.css';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\n\r\nfunction SearchBar() {\r\n  // history must be inside router. This component has to be extracted out to work!\r\n  const history = useHistory();\r\n\r\n  function extract_keyword(pathname) {\r\n    let xs = pathname.split(\"/\");\r\n    if (xs.length === 2) {\r\n      return xs[1];\r\n    }\r\n    else {\r\n      return xs[2];\r\n    }\r\n  }\r\n\r\n  const [keyword, setKeyword] = useState(extract_keyword(history.location.pathname));\r\n\r\n  function handleChange(event) {\r\n    setKeyword(event.target.value); // here event.target is <input>\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (keyword !== '') {\r\n      // parse keyword\r\n      if (keyword.startsWith('yhdm:') && (keyword.length > 5)) {\r\n        history.push(\"/yhdm/\"+keyword);\r\n      } else {\r\n        history.push(\"/google/\"+keyword+\"/1\");\r\n      }\r\n    }\r\n    else {\r\n      history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form autoComplete=\"on\" onSubmit={handleSubmit}>\r\n      <TextField id=\"searchbar\" label=\"umbra\" margin=\"dense\"\r\n        value={keyword}\r\n        onChange={handleChange}\r\n        fullWidth\r\n        variant=\"outlined\"\r\n      />\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default SearchBar;\r\n","//export const API_ROOT = \"http://127.0.0.1:8002/api/umbra\";\r\nexport const API_ROOT = \"https://www.kiui.moe/api/umbra\";","import React from 'react';\r\nimport './Flow.css';\r\n\r\n\r\nfunction Flow(props) {\r\n  return (\r\n    <div className=\"flow\">\r\n      {props.meta.map((value, index) => (\r\n        <FlowItem value={value} key={index} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n  \r\nfunction FlowItem(props) {\r\n  // props.value = {title:~, snippet:~, formattedUrl:~, ...}\r\n  return (\r\n    <div className=\"flow-item\">\r\n      <div className=\"url\"> {props.value['formattedUrl']} </div>\r\n      <a className=\"title\" href={props.value['formattedUrl']}> {props.value['title']} </a>\r\n      <div className=\"snippet\"> {props.value['snippet']} </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Flow;","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport Flow from \"./Flow\"\r\n\r\nimport \"./SearchResults.css\";\r\nimport { Paper } from '@material-ui/core';\r\n\r\nfunction SearchResults(){\r\n  let {keyword} = useParams();\r\n  let {page} = useParams();\r\n  const history = useHistory();\r\n  const [results, setResults] = useState([]);\r\n  const [status, setStatus] = useState('loading');\r\n\r\n  useEffect(()=>{\r\n    setStatus('loading');\r\n    // parse keyword\r\n    if (keyword.startsWith('yhdm:')) {\r\n      fetch(API_ROOT+\"/yhdm?keyword=\"+keyword.substr(5)).then(\r\n        res => res.json()\r\n      ).then(\r\n        res => {\r\n          //console.log(res);\r\n          if (res['success']) {\r\n            setResults(res['results']);\r\n            setStatus('ready_yhdm');\r\n          }\r\n          else {\r\n            console.log(res['error']);\r\n            setStatus('error');\r\n          }\r\n        }\r\n      ).catch(\r\n        () => {\r\n          setStatus('error');\r\n        }\r\n      )\r\n    } else {\r\n      fetch(API_ROOT+\"/google?keyword=\"+keyword+\"&page=\"+page).then(\r\n          res => res.json()\r\n        ).then(\r\n          res => {\r\n            //console.log(res);\r\n            if (res['success']) {\r\n              setResults(res['results']);\r\n              setStatus('ready_google');\r\n            }\r\n            else {\r\n              console.log(res['error']);\r\n              setStatus('error');\r\n            }\r\n          }\r\n        ).catch(\r\n          () => {\r\n            setStatus('error');\r\n          }\r\n        )\r\n    }\r\n  }, [keyword, page]);\r\n\r\n  function handleLeftpage() {\r\n    var ipage = parseInt(page);\r\n    if (ipage > 1) {\r\n      history.push(\"/google/\"+keyword+\"/\"+(ipage - 1).toString());\r\n    }\r\n  }\r\n\r\n  function handleRightpage() {\r\n    var ipage = parseInt(page);\r\n    if (ipage < 10) {\r\n      history.push(\"/google/\"+keyword+\"/\"+(ipage + 1).toString());\r\n    }\r\n  }\r\n\r\n  \r\n  if (status === \"loading\") {\r\n    return (\r\n      <div className=\"loading\"> ðŸŒ‘ </div>\r\n      );\r\n    } else if (status === \"error\") {\r\n      return (\r\n        <Paper className=\"paper\"> Error </Paper>\r\n        );\r\n      }\r\n      \r\n  function render_current_page(x) {\r\n    if (x === parseInt(page)) return (<span style={{color: 'black'}}> {x} </span>);\r\n    else return (<span style={{color: 'blue'}}> {x} </span>);\r\n  }\r\n\r\n  function render_page_manager() {\r\n    return (\r\n      <div className='page-manager'>\r\n          <span className='left-button' onClick={handleLeftpage}> &lt; </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/1\")}}> {render_current_page(1)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/2\")}}> {render_current_page(2)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/3\")}}> {render_current_page(3)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/4\")}}> {render_current_page(4)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/5\")}}> {render_current_page(5)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/6\")}}> {render_current_page(6)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/7\")}}> {render_current_page(7)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/8\")}}> {render_current_page(8)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/9\")}}> {render_current_page(9)} </span>\r\n          <span className='jump' onClick={()=>{history.push(\"/google/\"+keyword+\"/10\")}}> {render_current_page(10)} </span>\r\n          <span className='right-button' onClick={handleRightpage}> &gt; </span>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n      <Paper className=\"paper\">\r\n        <Flow meta={results}/>\r\n        {status === \"ready_google\" ? render_page_manager() : <div/>}\r\n      </Paper>\r\n  );\r\n}\r\n\r\nexport default SearchResults;","import React from 'react';\r\nimport {Switch, Route, HashRouter} from \"react-router-dom\";\r\nimport ScrollToTop from 'react-scroll-up';\r\nimport './App.css';\r\n\r\nimport SearchBar from \"./SearchBar\";\r\nimport SearchResults from \"./SearchResults\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <HashRouter>\r\n        <Switch>\r\n          {/* Search page */}\r\n          <Route path=\"/google/:keyword/:page\">\r\n            <div className=\"searchbar topped\"> <SearchBar/> </div>\r\n            <div className=\"searchres\"> <SearchResults/> </div>\r\n          </Route>\r\n          <Route path=\"/yhdm/:keyword\">\r\n            <div className=\"searchbar topped\"> <SearchBar/> </div>\r\n            <div className=\"searchres\"> <SearchResults/> </div>\r\n          </Route>\r\n          {/* fallback */}\r\n          <Route path=\"*\">\r\n          <div className=\"searchbar centered\"> <SearchBar/> </div>\r\n          </Route>\r\n        </Switch>  \r\n        <ScrollToTop showUnder={160}>\r\n          <span className='up-arrow'> â†‘ </span>\r\n        </ScrollToTop>\r\n      </HashRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}